From 3125cb6d6154c81ec82c7b77d1ad238c54017cc8 Mon Sep 17 00:00:00 2001
From: Gonzalo Odiard <godiard@gmail.com>
Date: Fri, 14 Feb 2014 09:18:09 -0300
Subject: [PATCH] Hide the password in the cp network proxy section

v2: Don't add a checkbox to show the password.

Signed-off-by: Gonzalo Odiard <godiard@sugarlabs.org>
---
 extensions/cpsection/network/view.py | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

diff --git a/extensions/cpsection/network/view.py b/extensions/cpsection/network/view.py
index d3242dc..189d684 100644
--- a/extensions/cpsection/network/view.py
+++ b/extensions/cpsection/network/view.py
@@ -203,12 +203,15 @@ class StringSettingBox(SettingBox):
     """
     A configuration line for a string setting.
     """
-    def __init__(self, name, setting, setting_key, size_group=None):
+    def __init__(self, name, setting, setting_key, size_group=None,
+                 password_field=False):
         SettingBox.__init__(self, name, size_group)
 
         self._entry = Gtk.Entry()
         self.pack_start(self._entry, True, True, 0)
         self._entry.show()
+        if password_field:
+            self._entry.set_visibility(False)
 
         setting.bind(setting_key, self._entry, 'text',
                      Gio.SettingsBindFlags.NO_SENSITIVITY)
@@ -726,7 +729,7 @@ class Network(SectionView):
         self.box_password = StringSettingBox(
             _('Password:'),
             self._proxy_settings['org.gnome.system.proxy.http'],
-            'authentication-password', size_group)
+            'authentication-password', size_group, password_field=True)
 
         auth_contents_box.pack_start(self.box_password, False, False, 0)
         self.box_password.show()
-- 
1.8.1.4

